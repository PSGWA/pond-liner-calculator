<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡πâ‡∏≤‡∏õ‡∏π‡∏ö‡πà‡∏≠ & ‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏°</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border-radius: 5px;
            border: 1px solid #ccc;
            transition: background-color 0.3s;
        }
        .tab:hover {
            background-color: #ddd;
        }
        .tab.active {
            background-color: #fff;
            border-bottom: 2px solid #28a745;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-size: 16px;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        input[type="number"], select, button {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }
        button {
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }
        button:hover {
            background-color: #218838;
        }
        textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            height: 150px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: 20px;
            resize: none;
            background-color: #f1f1f1;
        }
        .hidden {
            display: none;
        }
        #pondCopy, #canalCopy, #circularCopy {
            background-color: #007bff;
            color: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
            padding: 8px 16px;
        }
        #copyButton i {
            font-size: 18px;
        }
        #resetButton {
            background-color: #ffc107;
            color: black;
        }
        #resetButton:hover {
            background-color: #e0a800;
        }
        @media (max-width: 600px) {
            h1 {
                font-size: 20px;
            }
            label {
                font-size: 14px;
            }
            input[type="number"], button, select {
                font-size: 14px;
                padding: 10px;
            }
            textarea {
                font-size: 14px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ ‡∏ú‡πâ‡∏≤‡∏õ‡∏π‡∏ö‡πà‡∏≠ / ‡∏Ñ‡∏•‡∏≠‡∏á‡πÑ‡∏™‡πâ‡πÑ‡∏Å‡πà / ‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏°</h1>
    <div class="tabs">
        <div class="tab active" data-tab="pond">‡∏ö‡πà‡∏≠‡∏Ç‡∏∏‡∏î</div>
        <div class="tab" data-tab="canal">‡∏Ñ‡∏•‡∏≠‡∏á‡πÑ‡∏™‡πâ‡πÑ‡∏Å‡πà</div>
        <div class="tab" data-tab="circular">‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏°</div>
        <div class="tab" onclick="location.href='summary.html'">‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</div>
    </div>

    <div class="container" id="pondContainer">
        <form id="pondForm">
            <label for="size">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤ (‡∏°‡∏°.):</label>
            <div class="radio-group">
                <label><input type="radio" name="size" value="0.3" required> 0.3 ‡∏°‡∏°.</label>
                <label><input type="radio" name="size" value="0.5" required> 0.5 ‡∏°‡∏°.</label>
                <label><input type="radio" name="size" value="0.75" required> 0.75 ‡∏°‡∏°.</label>
                <label><input type="radio" name="size" value="all" required> ‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤</label>
            </div>

            <label for="width">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡πÄ‡∏°‡∏ï‡∏£):</label>
            <input type="number" id="pondWidth" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á" required>

            <label for="length">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß (‡πÄ‡∏°‡∏ï‡∏£):</label>
            <input type="number" id="pondLength" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß" required>

            <label for="depth">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (‡πÄ‡∏°‡∏ï‡∏£, ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö):</label>
            <input type="number" id="pondDepth" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">

            <label>
                <input type="checkbox" id="pondSpecialProvince" value="yes" /> ‡∏™‡πà‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á ‡∏™‡∏ï‡∏π‡∏• ‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ ‡∏¢‡∏∞‡∏•‡∏≤ ‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™ (‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° 5 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)
            </label>

            <button type="submit">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
            <button type="button" id="pondReset" style="display:none;">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà</button>
        </form>

        <textarea id="pondResult" readonly placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"></textarea>
        <button id="pondCopy" style="display:none;">
            <i class="fas fa-copy"></i> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        </button>
    </div>

    <div class="container hidden" id="canalContainer">
        <form id="canalForm">
            <label for="size">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤ (‡∏°‡∏°.):</label>
            <div class="radio-group">
                <label><input type="radio" name="canalSize" value="0.5" required> 0.5 ‡∏°‡∏°.</label>
            </div>

            <label for="width">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡πÄ‡∏°‡∏ï‡∏£):</label>
            <input type="number" id="canalWidth" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á" required>

            <label for="length">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß (‡πÄ‡∏°‡∏ï‡∏£):</label>
            <input type="number" id="canalLength" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß" required>

            <label for="depth">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (‡πÄ‡∏°‡∏ï‡∏£, ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö):</label>
            <input type="number" id="canalDepth" step="0.01" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">

            <label>
                <input type="checkbox" id="canalSpecialProvince" value="yes" /> ‡∏™‡πà‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á ‡∏™‡∏ï‡∏π‡∏• ‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ ‡∏¢‡∏∞‡∏•‡∏≤ ‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™ (‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° 5 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)
            </label>

            <button type="submit">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
            <button type="button" id="canalReset" style="display:none;">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà</button>
        </form>

        <textarea id="canalResult" readonly placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"></textarea>
        <button id="canalCopy" style="display:none;">
            <i class="fas fa-copy"></i> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        </button>
    </div>

    <div class="container hidden" id="circularContainer">
        <form id="circularForm">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á (‡πÄ‡∏°‡∏ï‡∏£):</label>
            <div class="radio-group">
                <label><input type="radio" name="circleDiameter" value="6" required> 6 ‡πÄ‡∏°‡∏ï‡∏£</label>
                <label><input type="radio" name="circleDiameter" value="8" required> 8 ‡πÄ‡∏°‡∏ï‡∏£</label>
                <label><input type="radio" name="circleDiameter" value="10" required> 10 ‡πÄ‡∏°‡∏ï‡∏£</label>
                <label><input type="radio" name="circleDiameter" value="12" required> 12 ‡πÄ‡∏°‡∏ï‡∏£</label>
            </div>

            <button type="submit">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            <button type="button" id="circularReset" style="display:none;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </form>

        <textarea id="circularResult" readonly placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"></textarea>
        <button id="circularCopy" style="display:none;">
            <i class="fas fa-copy"></i> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        </button>
    </div>

    <script>
        console.log("[DEBUG] Script started.");
        const tabs = document.querySelectorAll('.tab');
        const pondContainer = document.getElementById('pondContainer');
        const canalContainer = document.getElementById('canalContainer');
        const circularContainer = document.getElementById('circularContainer');
        console.log("[DEBUG] Tabs, containers selected.");

        tabs.forEach((tab) => {
            tab.addEventListener('click', () => {
                console.log(`[DEBUG] Tab clicked: ${tab.getAttribute('data-tab')}`);
                tabs.forEach((t) => t.classList.remove('active'));
                tab.classList.add('active');

                pondContainer.classList.add('hidden');
                canalContainer.classList.add('hidden');
                circularContainer.classList.add('hidden');

                const target = tab.getAttribute('data-tab');
                if (target === 'pond') {
                    pondContainer.classList.remove('hidden');
                } else if (target === 'canal') {
                    canalContainer.classList.remove('hidden');
                } else {
                    circularContainer.classList.remove('hidden');
                }
            });
        });

        const pondForm = document.getElementById('pondForm');
        const pondWidth = document.getElementById('pondWidth');
        const pondLength = document.getElementById('pondLength');
        const pondDepth = document.getElementById('pondDepth');
        const pondResult = document.getElementById('pondResult');
        const pondCopy = document.getElementById('pondCopy');
        const pondReset = document.getElementById('pondReset');
        const pondSpecialProvince = document.getElementById('pondSpecialProvince');

        pondForm.onsubmit = function(e) {
            e.preventDefault();
            console.log("[DEBUG] Pond form submitted.");

            const size = document.querySelector('input[name="size"]:checked');
            let widthVal = parseFloat(pondWidth.value);
            let lengthVal = parseFloat(pondLength.value);
            const depthVal = parseFloat(pondDepth.value || 0);
            console.log(`[DEBUG] Pond input => size: ${size ? size.value : 'none'}, width: ${widthVal}, length: ${lengthVal}, depth: ${depthVal}`);

            if (!size || widthVal <= 0 || lengthVal <= 0) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
                console.log("[DEBUG] Pond form validation failed.");
                return false;
            }

            let originalWidth = widthVal;
            let originalLength = lengthVal;

            if (!isNaN(depthVal) && depthVal > 0) {
                widthVal = widthVal + (depthVal * 2) + 2;
                lengthVal = lengthVal + (depthVal * 2) + 2;
                console.log(`[DEBUG] Pond adjusted for depth => widthVal: ${widthVal}, lengthVal: ${lengthVal}`);
            }

            const priceListPond = {
                '0.3': { price: 50, material: 'LDPE' },
                '0.5': { price: 65, material: 'HDPE' },
                '0.75': { price: 85, material: 'HDPE' }
            };

            function roundDown(n){
                return Math.floor(n);
            }

            function formatNumber(num){
                return roundDown(num).toString();
            }

            const area = widthVal * lengthVal;
            let totalPrice = 0;
            let resultText = "";

            if (size.value === "all") {
                console.log("[DEBUG] Pond size => ALL");
                let subPrice03 = roundDown(area * 50);
                let subPrice05 = roundDown(area * 65);
                let subPrice075 = roundDown(area * 85);
                resultText += `‡∏à‡∏≤‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏°‡∏≤ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö\n`;
                resultText += `‚úÖ LDPE ‡∏´‡∏ô‡∏≤ 0.3 ‡∏°‡∏°. ‚Äì ${subPrice03.toLocaleString()} ‡∏ö‡∏≤‡∏ó (50 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)\n`;
                resultText += `‚úÖ HDPE ‡∏´‡∏ô‡∏≤ 0.5 ‡∏°‡∏°. ‚Äì ${subPrice05.toLocaleString()} ‡∏ö‡∏≤‡∏ó (65 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)\n`;
                resultText += `‚úÖ HDPE ‡∏´‡∏ô‡∏≤ 0.75 ‡∏°‡∏°. ‚Äì ${subPrice075.toLocaleString()} ‡∏ö‡∏≤‡∏ó (85 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)\n\n`;
                resultText += `‡πÄ‡∏£‡∏≤‡∏°‡∏µ 3 ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö ‚ú®\n‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤ ‡∏¢‡∏¥‡πà‡∏á‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡∏ï‡πà‡∏≠‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡∏Ç‡∏£‡∏∏‡∏Ç‡∏£‡∏∞ \n\n‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÑ‡∏´‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏öüòä`;
            } else {
                const sel = priceListPond[size.value];
                totalPrice = roundDown(area * sel.price);

                let shippingFee = 0;
                if (totalPrice < 5000) {
                    shippingFee += 300;
                }
                if (pondSpecialProvince.checked) {
                    shippingFee += roundDown(5 * area);
                    shippingFee = Math.min(shippingFee, 2000);
                }
                shippingFee = roundDown(shippingFee);
                let sum = roundDown(totalPrice + shippingFee);

                resultText += `üìç ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:\n`;
                resultText += `‡∏ú‡πâ‡∏≤‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å ${sel.material} ‡∏´‡∏ô‡∏≤ ${size.value} ‡∏°‡∏°. (${sel.price} ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)\n`;
                resultText += `‡∏Ç‡∏ô‡∏≤‡∏î ${originalWidth} ‡∏°. √ó ${originalLength} ‡∏°.${depthVal > 0 ? ` ‡∏•‡∏∂‡∏Å ${depthVal} ‡∏°.` : ""}\n`;
                resultText += `‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î ${widthVal} ‡∏°. x ${lengthVal} ‡∏°. = ${area.toLocaleString()} ‡∏ï‡∏£.‡∏°. \n`;
                resultText += `(‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏±‡∏î‡πÅ‡∏ô‡∏ö‡∏û‡∏∑‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡∏∞ 1 ‡πÄ‡∏°‡∏ï‡∏£‡πÅ‡∏•‡πâ‡∏ß)\n\n`;
                if (shippingFee > 0) {
                    resultText += `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤ ${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                    resultText += `‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á ${shippingFee.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                }
                resultText += `üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${sum.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                resultText += `‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‚ú®\n`;
                resultText += `‡∏´‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö\n\n`;
                if (shippingFee <= 0) {
                    resultText += `\n(‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö)`;
                }
                if (sum >= 5000) {
                    let deposit = sum * 0.1;
                    deposit = Math.floor(deposit);
                    let balance = Math.floor(sum - deposit);
                    resultText += `‚úÖ ‡∏ä‡∏≥‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏à‡∏≥ 10% (${deposit.toLocaleString()} ‡∏ö‡∏≤‡∏ó) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πâ‡∏á‡∏ã‡∏∑‡πâ‡∏≠\n`;
                    resultText += `\nüì¶ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠-‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà & ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå\n`;
                    resultText += `üöö ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 2-4 ‡∏ß‡∏±‡∏ô\n`;
                    resultText += `‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${balance.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡πÇ‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòâ\n`;
                } else {
                    resultText += `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠-‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà & ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Ñ‡∏£‡∏±‡∏ö\n`;
                    resultText += `üöö ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 2-4 ‡∏ß‡∏±‡∏ô\n`;
                    resultText += `‡∏¢‡∏≠‡∏î ${sum.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡πÇ‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòâ\n`;
                }
            }
            pondResult.value = resultText.trim();
            pondCopy.style.display = 'flex';
            pondReset.style.display = 'block';
        };

        pondCopy.onclick = function() {
            pondResult.select();
            document.execCommand('copy');
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß");
        };

        pondReset.onclick = function() {
            pondForm.reset();
            pondResult.value = '';
            pondCopy.style.display = 'none';
            pondReset.style.display = 'none';
        };

        const canalForm = document.getElementById('canalForm');
        const canalWidth = document.getElementById('canalWidth');
        const canalLength = document.getElementById('canalLength');
        const canalDepth = document.getElementById('canalDepth');
        const canalResult = document.getElementById('canalResult');
        const canalCopy = document.getElementById('canalCopy');
        const canalReset = document.getElementById('canalReset');
        const canalSizeRadios = document.querySelectorAll('input[name="canalSize"]');
        const canalSpecialProvince = document.getElementById('canalSpecialProvince');

        canalSizeRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === '0.5') {
                    canalWidth.value = 4;
                    canalWidth.disabled = true;
                } else {
                    canalWidth.disabled = false;
                }
            });
        });

        canalForm.onsubmit = function(e) {
            e.preventDefault();
            const size = document.querySelector('input[name="canalSize"]:checked');
            let widthVal = parseFloat(canalWidth.value);
            let lengthVal = parseFloat(canalLength.value);
            const depthVal = parseFloat(canalDepth.value || 0);
            if (!size || widthVal <= 0 || lengthVal <= 0) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
                return false;
            }
            let originalWidth = widthVal;
            let originalLength = lengthVal;
            if (!isNaN(depthVal) && depthVal > 0) {
                widthVal = widthVal + (depthVal * 2) + 1;
                lengthVal = lengthVal + (depthVal * 2) + 1;
            }

            const priceListCanal = {
                '0.3': { price: 50, material: 'LDPE' },
                '0.5': { price: 60, material: 'LDPE' }
            };

            function roundDown(n){
                return Math.floor(n);
            }

            function formatNumber(num){
                return roundDown(num).toString();
            }

            const area = widthVal * lengthVal;
            let totalPrice = roundDown(area * priceListCanal[size.value].price);
            let mat = priceListCanal[size.value].material;
            let shippingFee = 0;
            if (totalPrice < 5000) {
                shippingFee = 300;
            }
            if (canalSpecialProvince.checked) {
                shippingFee += roundDown(5 * area);
            }
            shippingFee = roundDown(shippingFee);
            let sum = roundDown(totalPrice + shippingFee);

            let resultText = `üìç ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:\n`;
            resultText += `‡∏ú‡πâ‡∏≤‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å ${mat} ‡∏´‡∏ô‡∏≤ ${size.value} ‡∏°‡∏°. (${priceListCanal[size.value].price} ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏£.‡∏°.)\n`;
            resultText += `‡∏Ç‡∏ô‡∏≤‡∏î ${originalWidth} ‡∏°. √ó ${originalLength} ‡∏°.${depthVal > 0 ? ` ‡∏•‡∏∂‡∏Å ${depthVal} ‡∏°.` : ""} = ${area.toLocaleString()} ‡∏ï‡∏£.‡∏°.\n`;
            resultText += `(‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏±‡∏î‡πÅ‡∏ô‡∏ö‡∏û‡∏∑‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡∏∞ 0.5 ‡πÄ‡∏°‡∏ï‡∏£‡πÅ‡∏•‡πâ‡∏ß)\n\n`;
            resultText += `üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${sum.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
            resultText += `‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‚ú®\n`;
            resultText += `‡∏´‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö\n\n`;
            if (shippingFee > 0) {
                resultText += `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤ ${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                resultText += `‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏£‡∏ß‡∏° ${shippingFee.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
            } else {
                resultText += `(‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö)\n`;
            }
            resultText += `‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° ${sum.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n\n`;
            if (sum >= 5000) {
                let deposit = sum * 0.1;
                deposit = Math.floor(deposit);
                let balance = Math.floor(sum - deposit);
                resultText += `‚úÖ ‡∏ä‡∏≥‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏à‡∏≥ 10% (${deposit.toLocaleString()} ‡∏ö‡∏≤‡∏ó) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πâ‡∏á‡∏ã‡∏∑‡πâ‡∏≠\n`;
                resultText += `\nüì¶ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠-‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà & ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå\n`;
                resultText += `üöö ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 2-4 ‡∏ß‡∏±‡∏ô\n`;
                resultText += `‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${balance.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡πÇ‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòâ\n`;
            } else {
                resultText += `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠-‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà & ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Ñ‡∏£‡∏±‡∏ö\n`;
                resultText += `üöö ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 2-4 ‡∏ß‡∏±‡∏ô\n`;
                resultText += `‡∏¢‡∏≠‡∏î ${sum.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡πÇ‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòâ\n`;
            }
            canalResult.value = resultText.trim();
            canalCopy.style.display = 'flex';
            canalReset.style.display = 'block';
        };

        canalCopy.onclick = function() {
            canalResult.select();
            document.execCommand('copy');
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß");
        };

        canalReset.onclick = function() {
            canalForm.reset();
            canalWidth.disabled = false;
            canalResult.value = '';
            canalCopy.style.display = 'none';
            canalReset.style.display = 'none';
        };

        const circularForm = document.getElementById('circularForm');
        const circularResult = document.getElementById('circularResult');
        const circularCopy = document.getElementById('circularCopy');
        const circularReset = document.getElementById('circularReset');

        const circularInfo = {
            '6': {
                volume: 34000,
                price: 35000
            },
            '8': {
                volume: 60000,
                price: 50000
            },
            '10': {
                volume: 95000,
                price: 63000
            },
            '12': {
                volume: 135000,
                price: 72000
            }
        };

        circularForm.onsubmit = function(e) {
            e.preventDefault();
            const diameter = document.querySelector('input[name="circleDiameter"]:checked');
            if (!diameter) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏°");
                return false;
            }
            const diameterValue = diameter.value;
            const data = circularInfo[diameterValue];
            let resultText = `üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏°)\n`;
            resultText += `‡∏ö‡πà‡∏≠‡∏Å‡∏•‡∏° ‡πÄ‡∏°‡∏ó‡∏±‡∏•‡∏ä‡∏µ‡∏ó‡∏ö‡∏•‡∏π‡∏™‡πÇ‡∏Ñ‡∏õ ‡∏™‡∏π‡∏á 1.2 ‡∏°. ‡πÄ‡∏™‡πâ‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á ${diameterValue} ‡πÄ‡∏°‡∏ï‡∏£\n`;
            resultText += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${data.volume.toLocaleString()} ‡∏•‡∏¥‡∏ï‡∏£\n`;
            resultText += `‡∏£‡∏≤‡∏Ñ‡∏≤ ${data.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
            if (data.price >= 80000) {
                resultText += `\n‡∏™‡∏±‡πà‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 80,000 ‡∏™‡πà‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ü‡∏£‡∏µ!`;
            } else {
                resultText += `\n(‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á)`;
            }
            resultText += `\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠`;
            circularResult.value = resultText.trim();
            circularCopy.style.display = 'flex';
            circularReset.style.display = 'block';
        };

        circularCopy.onclick = function() {
            circularResult.select();
            document.execCommand('copy');
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß");
        };

        circularReset.onclick = function() {
            circularForm.reset();
            circularResult.value = '';
            circularCopy.style.display = 'none';
            circularReset.style.display = 'none';
        };
        console.log("[DEBUG] Script finished loading.");
    </script>
    <script>
    function runTests() {
        try {
            if (!document.getElementById('pondWidth')) {
                console.error('Test #1 => FAIL: pondWidth not found');
            } else {
                console.log('Test #1 => PASS: pondWidth exists');
            }
        } catch(e) {
            console.error('Test #1 => FAIL', e);
        }
        try {
            if (!window.circularInfo) {
                console.error('Test #2 => FAIL: circularInfo is not defined');
            } else {
                console.log('Test #2 => PASS: circularInfo is defined');
            }
        } catch(e) {
            console.error('Test #2 => FAIL', e);
        }
    }
    runTests();
    </script>
</body>
</html>
